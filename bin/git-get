#!/bin/bash
# vim:tw=0:ts=2:sw=2:et:norl:ft=bash
# Author: Landon Bouma (landonb &#x40; retrosoft &#x2E; com)
# Project: https://github.com/landonb/git-FlU#ðŸŒ¡
# License: MIT. Please find more in the LICENSE file.

GITFLU_MYST_REMOTE_HIERARCHY="${GITFLU_MYST_REMOTE_HIERARCHY:-origin upstream}"

fetch_known_remotes_orderly () {
  for remote in ${GITFLU_MYST_REMOTE_HIERARCHY}; do
    if git remote get-url ${remote} 2> /dev/null; then
      echo "Fetching â€˜${remote}â€™"
      git fetch ${remote}
    fi
  done
}

git_get () {
  fetch_known_remotes_orderly

  # Bash for loop split on newlines...
  # overkill because remote names do not have spaces.
  local IFS=$'\n' 
  local remote
  for remote in $(git remote | sort); do
    #echo ${remote}
    if [[ "${remote}" != 'origin' \
       && "${remote}" != 'upstream' \
       && "${remote}" != 'travel' ]]; then
    echo "Fetching ${remote}"
    git fetch ${remote}
  fi
  done
  unset IFS
}

main () {
  git_get
}

if [ "$0" = "${BASH_SOURCE[0]}" ]; then
  main "${@}"
fi

